#!/bin/bash

# Solution de l'Exercice 2 : Consulter les logs

set -e

echo "ğŸ“‹ Exercice 2 : Consulter les logs"
echo ""

# Ã‰tape 1 : CrÃ©er le gÃ©nÃ©rateur de logs
echo "ğŸ“¦ Ã‰tape 1 : CrÃ©ation d'un gÃ©nÃ©rateur de logs..."
podman run -d --name log-generator busybox sh -c "while true; do echo \"[$(date)] Message de log - Compteur: \$RANDOM\"; sleep 1; done"
echo "âœ“ GÃ©nÃ©rateur crÃ©Ã© !"
echo ""

sleep 3

# Ã‰tape 2 : Afficher tous les logs
echo "ğŸ“„ Ã‰tape 2 : Affichage de tous les logs..."
echo ""
podman logs log-generator
echo ""

# Ã‰tape 3 : Afficher les 5 derniÃ¨res lignes
echo "ğŸ“„ Ã‰tape 3 : Affichage des 5 derniÃ¨res lignes..."
echo ""
podman logs --tail 5 log-generator
echo ""

# Ã‰tape 4 : Suivre en temps rÃ©el
echo "ğŸ“¡ Ã‰tape 4 : Suivi des logs en temps rÃ©el (5 secondes)..."
echo ""
timeout 5 podman logs -f log-generator || true
echo ""
echo ""

echo "============================================================"
echo "âœ¨ Exercice terminÃ© !"
echo "============================================================"
